<!DOCTYPE html>
<html>
	<head>
		<title>Platform game</title>

		<meta charset="utf8" />

		<script src="js/vendor/jquery-2.1.3.min.js"></script>
		<script src="js/common/compat.js"></script>
		<script src="js/common/input.js"></script>
		
		<script src="math.js"></script>
		<script src="toolbox.js"></script>
		<script src="graphics.js"></script>
		<script src="editor.js"></script>
		<script src="game.js"></script>
		<script src="sprites.js"></script>

		<script src="player.js"></script>
		<script src="level.js"></script>
		
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">		
		
		<style>
			#game-canvas {
				border: 1px solid black;
				width: 768px;
			}
			
			img.sprite {
				height: 32px;
				border: 2px solid white;
			}
			
			img.selected {
				height: 32px;
				border: 2px solid red;
			}
		</style>
		
		<script>
			function load() {
				var level_name = $("#level_name").val();
				
				if(level_name == "") {
					alert("Please specify the name of the level to load...");
					return;
				}

				$("#status").html("Loading level, please wait...");

				editor.game
					.getObject("level")
					.loadLevel(level_name)
					.then(
						function() { $("#status").html("Level loaded..."); },
						function(error) { $("#status").html("Error loading level: " + error); }
					);					
			}
			
			function save() {
				var level_name = $("#level_name").val();
				
				if(level_name == "") {
					alert("Please specify the name of the level to load...");
					return;
				}

				$("#status").html("Saving level, please wait...");
				
				editor.game
					.getObject("level")
					.saveLevel(level_name)
					.then(
						function() { $("#status").html("Level saved..."); }, 
						function(error) { $("#status").html("Error saving level: " + error); }
					);
			}
		</script>
	</head>

	<body>
		<nav class="navbar navbar-default">
			<div class="container-fluid">			
				<div class="navbar-header">
					<a class="navbar-brand" href="#">Level Editor</a>
				</div>
		
				<form class="navbar-form navbar-left">
					<div class="form-group">
						<input id="level_name" type="text" class="form-control" value="demo" placeholder="Level name">
					</div>
					<button type="button" onclick="load()" class="btn btn-warning">Load</button>
					<button type="button" onclick="save()" class="btn btn-danger">Save</button>
				</form>

				<p class="navbar-text" id="status"></p>
			</div>
		</nav>
		
		<div class="col-lg-8">
			<canvas id="game-canvas"></canvas>
		</div>
	
		<div id="spriteBox">
		</div>

		<script>
			var server = "http://www.ivarclemens.nl/platform_game/";
			var editor;
			
			(function() {
				editor = new Editor("game-canvas", 32 * 24, 32 * 15);
				var spriteBox = new SpriteBox("spriteBox", editor, spriteTable);
			}());
		</script>

		
		<div style="float: right">
			<small>Using graphics by <a href="http://www.kenney.nl">Kenney</a> and creek23</small>
		</div>
	</body>
</html>